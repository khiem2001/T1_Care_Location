<!-- filepath: d:\Freelancer\tailwind_with_ejs_starter_template-master\views\admin\index.ejs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("../partials/head", { title: "Tổng quan" }) %>
  </head>
  <body>
    <%- include('../partials/layout', { body: `
    <main>
      <nav
        class="flex items-center text-sm text-gray-500"
        aria-label="Breadcrumb"
      >
        <ol class="inline-flex items-center space-x-1 md:space-x-3">
          <li aria-current="page">
            <div class="flex items-center">
              <i class="fas fa-house mr-2 text-gray-400"></i>
              <span class="text-gray-500">Tổng quan</span>
            </div>
          </li>
          <!-- <li>
            <div class="flex items-center">
              <i class="fas fa-house mr-2"></i>

              <i class="fas fa-chevron-right mx-2 text-gray-400 text-xs"></i>
              <a href="#" class="text-gray-700 hover:text-blue-600">Projects</a>
            </div>
          </li>
          <li aria-current="page">
            <div class="flex items-center">
              <i class="fas fa-chevron-right mx-2 text-gray-400 text-xs"></i>
              <span class="text-gray-500">Flowbite</span>
            </div>
          </li> -->
        </ol>
      </nav>

      <div>
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 mb-5"
        >
          <!-- Card 1 -->
          <div
            class="bg-white shadow-md rounded-2xl p-4 flex items-center justify-between"
          >
            <div>
              <p class="text-sm text-gray-500">Tổng người dùng</p>
              <h2 class="text-2xl font-semibold text-[#7e22ce]">
                ${totalUser}
              </h2>
            </div>
            <div class="text-purple-600 text-3xl">
              <i class="fas fa-users"></i>
            </div>
          </div>

          <!-- Card 2 -->
          <div
            class="bg-white shadow-md rounded-2xl p-4 flex items-center justify-between"
          >
            <div>
              <p class="text-sm text-gray-500">Tổng số thiết bị</p>
              <h2 class="text-2xl font-semibold text-[#7e22ce]">
                ${totalDevice}
              </h2>
            </div>
            <div class="text-green-500 text-3xl">
              <i class="fas fa-location-dot text-[#7e22ce] text-2xl"></i>
            </div>
          </div>
        </div>
        <canvas id="userChart" height="100"></canvas>
      </div>
    </main>
    ` }) %>
  </body>
  <script src="js/jquery-1.11.1.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const labels = [
        'Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6',
        'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'
      ];
      const _data = <%= data %>;


      const ctx = document.getElementById('userChart').getContext('2d');

      new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [{
            label: "Tổng người dùng",
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
            ], // Bar colors
            borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
            ], // Border colors
            borderWidth: 1, // Border width
            data: _data // Use dynamic data from the backend
          }]
        },
        options: {
          responsive: true,
          scales: {
            xAxes: [{
              ticks: {
                fontColor: '#7e22ce'
              },
              gridLines: {
                color: '#eee'
              }
            }],
            yAxes: [{
              ticks: {
                fontColor: '#7e22ce'
              },
              gridLines: {
                color: '#eee'
              },
              beginAtZero: true
            }]
          },
          legend: {
            labels: {
              fontColor: '#7e22ce'
            }
          },
          tooltips: {
            // titleFontColor: '#7e22ce',
            // bodyFontColor: '#7e22ce'
          }
        }
      });
    });
  </script>
</html>
